<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.neuedu.jd.model.mapper.CommodityMapper">

	<select id="selectCommoditySales" parameterType="map" resultType="Commodity">
		select *
		from commodity
		order by salesvolume desc
		limit #{k_beginIndex},#{k_pagesize}
	</select>
	
	<select id="selectCommodityBySid" parameterType="int" resultMap="commodityResult">
		select *
		from commodity c,shop s
		where c.shopid=s.id
		and sid = #{sid}
		order by c.id asc
	</select>
	<resultMap type="Commodity" id="commodityResult">
		<result property="id" column="id"/>
		<result property="name" column="name"/>
		<result property="price" column="price"/>
		<result property="description" column="description"/>
		<result property="imgurl" column="imgurl"/>
		<result property="imgsrc" column="imgsrc"/>
		<result property="commentcount" column="commentcount"/>
		<result property="salesvolume" column="salesvolume"/>
		<result property="sid" column="sid"/>
		<association property="shop" column="shopid" javaType="Shop" resultMap="shopResult"></association>
	</resultMap>
	<resultMap type="Shop" id="shopResult">
		<result property="id" column="id"/>
		<result property="uid" column="uid"/>
		<result property="shopname" column="shopname"/>
	</resultMap>

</mapper>